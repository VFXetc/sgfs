
condition: |
    if not self.get('step'):
        raise ValueError('%(type)s %(id)s has no pipeline step' % self)
    return all(self['step'][x] not in do_not_create for x in ('code', 'short_name'))

do_not_create:
    - Approval
    - Client
    - Client Approval
    - Client Spotting
    - Online
    - Spotting

name_expr: self['step']['short_name']

templates:

    # Catch-all for publishes.
    "*_publish":  published/{publisher.type}/{publisher.name}/v{publisher.version:04d}
